# ç½‘æ˜“äº‘éŸ³ä¹æ’ä»¶ (Netease Music Plugin)

è¿™æ˜¯ä¸€ä¸ªä¸º go-musicfox v2 å¼€å‘çš„ç½‘æ˜“äº‘éŸ³ä¹æ’ä»¶ï¼Œæä¾›å®Œæ•´çš„ç½‘æ˜“äº‘éŸ³ä¹æœåŠ¡æ”¯æŒã€‚

## åŠŸèƒ½ç‰¹æ€§

### ç™»å½•åŠŸèƒ½
- âœ… æ‰‹æœºå·+å¯†ç ç™»å½•
- âœ… é‚®ç®±+å¯†ç ç™»å½•
- âœ… Cookieé…ç½®ç™»å½•
- âœ… äºŒç»´ç ç™»å½•
- âœ… ç™»å½•çŠ¶æ€ç®¡ç†å’Œåˆ·æ–°

### æœç´¢åŠŸèƒ½
- âœ… æ­Œæ›²æœç´¢
- âœ… ä¸“è¾‘æœç´¢
- âœ… è‰ºæœ¯å®¶æœç´¢
- âœ… æ’­æ”¾åˆ—è¡¨æœç´¢
- âœ… æ”¯æŒåˆ†é¡µå’Œè¿‡æ»¤

### æ’­æ”¾åˆ—è¡¨ç®¡ç†
- âœ… è·å–æ’­æ”¾åˆ—è¡¨ä¿¡æ¯
- âœ… è·å–æ’­æ”¾åˆ—è¡¨æ­Œæ›²
- âœ… åˆ›å»ºæ’­æ”¾åˆ—è¡¨
- âœ… æ›´æ–°æ’­æ”¾åˆ—è¡¨
- âœ… åˆ é™¤æ’­æ”¾åˆ—è¡¨
- âœ… è·å–ç”¨æˆ·æ’­æ”¾åˆ—è¡¨

### æ­Œæ›²ä¿¡æ¯
- âœ… è·å–æ­Œæ›²æ’­æ”¾URLï¼ˆæ”¯æŒå¤šç§éŸ³è´¨ï¼‰
- âœ… è·å–æ­Œæ›²æ­Œè¯ï¼ˆæ”¯æŒæ—¶é—´è½´æ­Œè¯ï¼‰
- âœ… è·å–æ­Œæ›²è¯¦ç»†ä¿¡æ¯
- âœ… è·å–æ­Œæ›²è¯„è®º

### ç”¨æˆ·åŠŸèƒ½
- âœ… è·å–ç”¨æˆ·ä¿¡æ¯
- âœ… å…³æ³¨/å–æ¶ˆå…³æ³¨ç”¨æˆ·
- âœ… è·å–ç”¨æˆ·å–œæ¬¢çš„æ­Œæ›²
- âœ… è·å–ç”¨æˆ·å…³æ³¨åˆ—è¡¨
- âœ… è·å–ç”¨æˆ·ç²‰ä¸åˆ—è¡¨
- âœ… è·å–ç”¨æˆ·æ’­æ”¾å†å²
- âœ… è·å–ç”¨æˆ·äº‘ç›˜éŸ³ä¹

### æ¨èåŠŸèƒ½
- âœ… æ¯æ—¥æ¨èæ­Œæ›²
- âœ… ä¸ªæ€§åŒ–æ¨è
- âœ… æ¨èæ­Œå•
- âœ… ç›¸ä¼¼æ­Œæ›²æ¨è
- ğŸš§ æ–°æ­Œé€Ÿé€’ï¼ˆå¾…å®Œå–„ï¼‰
- ğŸš§ çƒ­é—¨æ­Œæ‰‹ï¼ˆå¾…å®Œå–„ï¼‰
- âœ… æ–°ç¢Ÿä¸Šæ¶

### æ’è¡Œæ¦œåŠŸèƒ½
- âœ… è·å–æ’è¡Œæ¦œåˆ—è¡¨
- âœ… è·å–æ’è¡Œæ¦œæ­Œæ›²
- âœ… çƒ­æœå…³é”®è¯
- âœ… æ ¹æ®åˆ†ç±»è·å–çƒ­é—¨æ­Œå•
- âœ… è·å–æ­Œå•åˆ†ç±»

### è‰ºæœ¯å®¶å’Œä¸“è¾‘
- âœ… è·å–è‰ºæœ¯å®¶ä¿¡æ¯
- âœ… è·å–è‰ºæœ¯å®¶çƒ­é—¨æ­Œæ›²
- âœ… è·å–è‰ºæœ¯å®¶ä¸“è¾‘
- âœ… è·å–ä¸“è¾‘ä¿¡æ¯
- âœ… è·å–ä¸“è¾‘æ­Œæ›²

### ç”µå°åŠŸèƒ½
- âœ… è·å–ç”µå°åˆ—è¡¨
- âœ… è·å–ç”µå°èŠ‚ç›®

## å®‰è£…å’Œä½¿ç”¨

### æ„å»ºæ’ä»¶

```bash
cd v2/plugins/netease
go build -o netease-plugin .
```

### è¿è¡Œæµ‹è¯•

```bash
go test -v
```

### é…ç½®è¯´æ˜

æ’ä»¶æ”¯æŒé€šè¿‡é…ç½®æ–‡ä»¶è®¾ç½®Cookieè¿›è¡Œè‡ªåŠ¨ç™»å½•ï¼š

```json
{
  "netease": {
    "cookie": "your_netease_cookie_here"
  }
}
```

### ç™»å½•æ–¹å¼

#### 1. æ‰‹æœºå·ç™»å½•
```go
credentials := map[string]string{
    "type": "phone",
    "phone": "13800138000",
    "password": "your_password",
    "country_code": "86", // å¯é€‰ï¼Œé»˜è®¤86
}
err := plugin.Login(ctx, credentials)
```

#### 2. é‚®ç®±ç™»å½•
```go
credentials := map[string]string{
    "type": "email",
    "email": "your_email@example.com",
    "password": "your_password",
}
err := plugin.Login(ctx, credentials)
```

#### 3. Cookieç™»å½•
```go
credentials := map[string]string{
    "type": "cookie",
    "cookie": "your_cookie_string",
}
err := plugin.Login(ctx, credentials)
```

#### 4. äºŒç»´ç ç™»å½•
```go
// å¼€å§‹äºŒç»´ç ç™»å½•
qrKey, qrURL, err := plugin.StartQRLogin(ctx)
if err != nil {
    // å¤„ç†é”™è¯¯
}

// æ˜¾ç¤ºäºŒç»´ç ç»™ç”¨æˆ·æ‰«æ
// ...

// è½®è¯¢æ£€æŸ¥ç™»å½•çŠ¶æ€
for {
    status, err := plugin.CheckQRLogin(ctx, qrKey)
    if err != nil {
        // å¤„ç†é”™è¯¯
        break
    }
    
    switch status {
    case "success":
        // ç™»å½•æˆåŠŸ
        return
    case "expired":
        // äºŒç»´ç è¿‡æœŸ
        return
    case "waiting":
        // ç­‰å¾…æ‰«æ
        time.Sleep(2 * time.Second)
    case "scanned":
        // å·²æ‰«æï¼Œç­‰å¾…ç¡®è®¤
        time.Sleep(2 * time.Second)
    }
}
```

## API ä½¿ç”¨ç¤ºä¾‹

### æœç´¢æ­Œæ›²
```go
options := plugin.SearchOptions{
    Query:  "å‘¨æ°ä¼¦",
    Type:   plugin.SearchTypeTrack,
    Limit:  20,
    Offset: 0,
}

result, err := plugin.Search(ctx, "å‘¨æ°ä¼¦", options)
if err != nil {
    // å¤„ç†é”™è¯¯
}

for _, track := range result.Tracks {
    fmt.Printf("æ­Œæ›²: %s - %s\n", track.Title, track.Artist)
}
```

### è·å–æ­Œæ›²æ’­æ”¾URL
```go
url, err := plugin.GetTrackURL(ctx, "trackID", plugin.AudioQualityHigh)
if err != nil {
    // å¤„ç†é”™è¯¯
}
fmt.Printf("æ’­æ”¾URL: %s\n", url)
```

### è·å–æ­Œè¯
```go
lyrics, err := plugin.GetTrackLyrics(ctx, "trackID")
if err != nil {
    // å¤„ç†é”™è¯¯
}

fmt.Printf("æ­Œè¯: %s\n", lyrics.Content)
for _, timed := range lyrics.TimedLyrics {
    fmt.Printf("[%v] %s\n", timed.Time, timed.Content)
}
```

## æŠ€æœ¯æ¶æ„

- **åŸºç¡€æ¡†æ¶**: åŸºäº go-musicfox v2 æ’ä»¶ç³»ç»Ÿ
- **ç½‘æ˜“äº‘API**: ä½¿ç”¨ github.com/go-musicfox/netease-music åº“
- **äºŒç»´ç ç”Ÿæˆ**: ä½¿ç”¨ github.com/skip2/go-qrcode åº“
- **Cookieç®¡ç†**: ä½¿ç”¨ github.com/telanflow/cookiejar åº“
- **JSONè§£æ**: ä½¿ç”¨ github.com/buger/jsonparser åº“

## æ–‡ä»¶ç»“æ„

```
v2/plugins/netease/
â”œâ”€â”€ plugin.go          # ä¸»æ’ä»¶æ–‡ä»¶
â”œâ”€â”€ auth.go            # ç™»å½•è®¤è¯åŠŸèƒ½
â”œâ”€â”€ search.go          # æœç´¢åŠŸèƒ½
â”œâ”€â”€ playlist.go        # æ’­æ”¾åˆ—è¡¨ç®¡ç†
â”œâ”€â”€ track.go           # æ­Œæ›²ä¿¡æ¯è·å–
â”œâ”€â”€ user.go            # ç”¨æˆ·ç›¸å…³åŠŸèƒ½
â”œâ”€â”€ features.go        # æ¨èå’Œå…¶ä»–åŠŸèƒ½
â”œâ”€â”€ recommend.go       # æ¨èåŠŸèƒ½
â”œâ”€â”€ chart.go           # æ’è¡Œæ¦œåŠŸèƒ½
â”œâ”€â”€ plugin_test.go     # æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ go.mod             # Goæ¨¡å—æ–‡ä»¶
â””â”€â”€ README.md          # è¯´æ˜æ–‡æ¡£
```

## å¼€å‘çŠ¶æ€

- âœ… æ ¸å¿ƒåŠŸèƒ½å·²å®Œæˆ
- âœ… ç™»å½•åŠŸèƒ½å·²å®Œæˆ
- âœ… æœç´¢åŠŸèƒ½å·²å®Œæˆ
- âœ… æ’­æ”¾åˆ—è¡¨ç®¡ç†å·²å®Œæˆ
- âœ… æ­Œæ›²ä¿¡æ¯è·å–å·²å®Œæˆ
- âœ… ç”¨æˆ·åŠŸèƒ½å·²å®Œæˆ
- âœ… æ¨èåŠŸèƒ½åŸºæœ¬å®Œæˆ
- âœ… æ’è¡Œæ¦œåŠŸèƒ½å·²å®Œæˆ
- âœ… åŸºæœ¬æµ‹è¯•å·²å®Œæˆ
- ğŸš§ éƒ¨åˆ†é«˜çº§åŠŸèƒ½å¾…å®Œå–„

## æ³¨æ„äº‹é¡¹

1. **ç½‘ç»œä¾èµ–**: æ’ä»¶éœ€è¦ç½‘ç»œè¿æ¥æ‰èƒ½æ­£å¸¸å·¥ä½œ
2. **APIé™åˆ¶**: ç½‘æ˜“äº‘éŸ³ä¹APIå¯èƒ½æœ‰é¢‘ç‡é™åˆ¶
3. **ç‰ˆæƒé™åˆ¶**: æŸäº›æ­Œæ›²å¯èƒ½å› ç‰ˆæƒé—®é¢˜æ— æ³•æ’­æ”¾
4. **ç™»å½•çŠ¶æ€**: å»ºè®®å®šæœŸåˆ·æ–°ç™»å½•çŠ¶æ€ä»¥ä¿æŒä¼šè¯æœ‰æ•ˆ
5. **Cookieå®‰å…¨**: è¯·å¦¥å–„ä¿ç®¡Cookieä¿¡æ¯ï¼Œé¿å…æ³„éœ²

## è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›è¿™ä¸ªæ’ä»¶ã€‚

## è®¸å¯è¯

MIT License